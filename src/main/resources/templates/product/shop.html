<!DOCTYPE html>
<html xmlns="http://www.thymeleaf.org" th:replace="~{/layout/layout::dynamic(~{::body})}">

<head>
	<meta charset="UTF-8">
	<title>GreenFarm</title>
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

</head>

<body>
	<div class="container-fluid py-5">
		<div class="container pt-5 pb-3">
			<div class="text-center mb-3 pb-3">111
				<h6 class="text-primary text-uppercase" style="letter-spacing: 5px;">Trang</h6>
				<h1>Tour</h1>
			</div>
			<div class="row">
				<div class="col-lg-4 col-md-6 mb-4">
					<div class="package-item bg-white mb-2">
						<img class="img-fluid" src="../assets/img/package-1.jpg" alt="">
						<div class="p-4">
							<div class="d-flex justify-content-between mb-3">
								<small class="m-0"><i
										class="fa fa-map-marker-alt text-primary mr-2"></i>Thailand</small>
								<small class="m-0"><i class="fa fa-calendar-alt text-primary mr-2"></i>3 days</small>
								<small class="m-0"><i class="fa fa-user text-primary mr-2"></i>2 Person</small>
							</div>
							<a class="h5 text-decoration-none" href="/tour-detail">Discover amazing places of the world
								with us</a>
							<div class="border-top mt-4 pt-4">
								<div class="d-flex justify-content-between">
									<h6 class="m-0"><i class="fa fa-star text-primary mr-2"></i>4.5 <small>(250)</small>
									</h6>
									<h5 class="m-0">$350</h5>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="col-lg-4 col-md-6 mb-4">
					<div class="package-item bg-white mb-2">
						<img class="img-fluid" src="../assets/img/package-2.jpg" alt="">
						<div class="p-4">
							<div class="d-flex justify-content-between mb-3">
								<small class="m-0"><i
										class="fa fa-map-marker-alt text-primary mr-2"></i>Thailand</small>
								<small class="m-0"><i class="fa fa-calendar-alt text-primary mr-2"></i>3 days</small>
								<small class="m-0"><i class="fa fa-user text-primary mr-2"></i>2 Person</small>
							</div>
							<a class="h5 text-decoration-none" href="">Discover amazing places of the world with us</a>
							<div class="border-top mt-4 pt-4">
								<div class="d-flex justify-content-between">
									<h6 class="m-0"><i class="fa fa-star text-primary mr-2"></i>4.5 <small>(250)</small>
									</h6>
									<h5 class="m-0">$350</h5>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="col-lg-4 col-md-6 mb-4">
					<div class="package-item bg-white mb-2">
						<img class="img-fluid" src="../assets/img/package-3.jpg" alt="">
						<div class="p-4">
							<div class="d-flex justify-content-between mb-3">
								<small class="m-0"><i
										class="fa fa-map-marker-alt text-primary mr-2"></i>Thailand</small>
								<small class="m-0"><i class="fa fa-calendar-alt text-primary mr-2"></i>3 days</small>
								<small class="m-0"><i class="fa fa-user text-primary mr-2"></i>2 Person</small>
							</div>
							<a class="h5 text-decoration-none" href="">Discover amazing places of the world with us</a>
							<div class="border-top mt-4 pt-4">
								<div class="d-flex justify-content-between">
									<h6 class="m-0"><i class="fa fa-star text-primary mr-2"></i>4.5 <small>(250)</small>
									</h6>
									<h5 class="m-0">$350</h5>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="col-lg-4 col-md-6 mb-4">
					<div class="package-item bg-white mb-2">
						<img class="img-fluid" src="../assets/img/package-4.jpg" alt="">
						<div class="p-4">
							<div class="d-flex justify-content-between mb-3">
								<small class="m-0"><i
										class="fa fa-map-marker-alt text-primary mr-2"></i>Thailand</small>
								<small class="m-0"><i class="fa fa-calendar-alt text-primary mr-2"></i>3 days</small>
								<small class="m-0"><i class="fa fa-user text-primary mr-2"></i>2 Person</small>
							</div>
							<a class="h5 text-decoration-none" href="">Discover amazing places of the world with us</a>
							<div class="border-top mt-4 pt-4">
								<div class="d-flex justify-content-between">
									<h6 class="m-0"><i class="fa fa-star text-primary mr-2"></i>4.5 <small>(250)</small>
									</h6>
									<h5 class="m-0">$350</h5>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="col-lg-4 col-md-6 mb-4">
					<div class="package-item bg-white mb-2">
						<img class="img-fluid" src="../assets/img/package-5.jpg" alt="">
						<div class="p-4">
							<div class="d-flex justify-content-between mb-3">
								<small class="m-0"><i
										class="fa fa-map-marker-alt text-primary mr-2"></i>Thailand</small>
								<small class="m-0"><i class="fa fa-calendar-alt text-primary mr-2"></i>3 days</small>
								<small class="m-0"><i class="fa fa-user text-primary mr-2"></i>2 Person</small>
							</div>
							<a class="h5 text-decoration-none" href="">Discover amazing places of the world with us</a>
							<div class="border-top mt-4 pt-4">
								<div class="d-flex justify-content-between">
									<h6 class="m-0"><i class="fa fa-star text-primary mr-2"></i>4.5 <small>(250)</small>
									</h6>
									<h5 class="m-0">$350</h5>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="col-lg-4 col-md-6 mb-4">
					<div class="package-item bg-white mb-2">
						<img class="img-fluid" src="../assets/img/package-6.jpg" alt="">
						<div class="p-4">
							<div class="d-flex justify-content-between mb-3">
								<small class="m-0"><i
										class="fa fa-map-marker-alt text-primary mr-2"></i>Thailand</small>
								<small class="m-0"><i class="fa fa-calendar-alt text-primary mr-2"></i>3 days</small>
								<small class="m-0"><i class="fa fa-user text-primary mr-2"></i>2 Person</small>
							</div>
							<a class="h5 text-decoration-none" href="">Discover amazing places of the world with us</a>
							<div class="border-top mt-4 pt-4">
								<div class="d-flex justify-content-between">
									<h6 class="m-0"><i class="fa fa-star text-primary mr-2"></i>4.5 <small>(250)</small>
									</h6>
									<h5 class="m-0">$350</h5>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- Packages End -->

	<!-- Destination Start -->
	<div class="container-fluid py-5">
		<div class="container pt-5 pb-3">
			<div class="text-center mb-3 pb-3">
				<h6 class="text-primary text-uppercase" style="letter-spacing: 5px;">Destination</h6>
				<h1>Product</h1>
			</div>

			 <!-- Đây là biểu mẫu lọc sản phẩm -->
		    <form id="filterForm">
		        <label for="minPrice">Giá tối thiểu:</label>
		        <input type="number" id="minPrice" name="minPrice" step="0.01">
		
		        <label for="maxPrice">Giá tối đa:</label>
		        <input type="number" id="maxPrice" name="maxPrice" step="0.01">
		
		        <input type="submit" value="Lọc">
		    </form>
		
		    

		

			<!-- Biểu mẫu lọc theo tên A-Z -->
			<!-- <form id="filterForm" method="get">
				<label for="sort">Sắp xếp theo tên:</label>
				<select id="sort" name="sort">
					<option value="asc">A-Z</option>
					<option value="desc">Z-A</option>
				</select>

				<button type="submit">Lọc theo tên</button>
			</form> -->
			 <form id="filterForm">
        			<input type="submit" value="Sắp xếp theo tên A-Z">
    			</form>

			<form action="/product/filter-by-custom-price-range" method="get">
				<label>Giá:</label>
				<input type="radio" name="priceRange" value="under500k" /> Dưới 50,000₫
				<input type="radio" name="priceRange" value="500kTo1M" /> 50,000₫ - 100,000₫
				<input type="radio" name="priceRange" value="1MTo1.5M" /> 100,000₫ - 150,000₫
				<input type="radio" name="priceRange" value="2MTo5M" /> 200,000₫ - 500,000₫
				<input type="radio" name="priceRange" value="over5M" /> Trên 5,000,000₫

				<button type="submit">Lọc</button>
			</form>
			<form id="searchForm">
				<input type="text" id="searchKeyword" placeholder="Nhập từ khóa">
				<button type="submit">Tìm kiếm</button>
			</form>
			<div class="row" id="filterResults">
				<div th:each="p:${items}" class="col-lg-4 col-md-6 mb-4">
					<div class="product_thumb destination-item position-relative overflow-hidden mb-2">
						<a th:href="@{|/product/detail/${p.productid}|}"><img style="height:260px" class="img-fluid"
								th:src="@{|${p.image}|}" alt=""></a>
						<!-- <a class="destination-overlay text-white text-decoration-none" href="">
                            <h5 class="text-white">Title</h5>
                            <span>Print</span>
                        </a>  -->
					</div>
					<div class="product_content" style="text-align: center;">
						<h5 class="product_title">
							<a th:utext="${p.productname}"></a>
						</h5>
						<span class="product_price"
							th:text="*{#numbers.formatDecimal(p.price,0,'COMMA',0,'POINT')}+ 'đ'">
						</span>
					</div>
				</div>

			</div>
		</div>
	</div>
	<script>
		// JavaScript code

		// Gắn kết sự kiện submit cho biểu mẫu tìm kiếm
		$('#searchForm').submit(function (event) {
			event.preventDefault(); // Ngăn chặn hành vi mặc định của trình duyệt

			var keyword = $('#searchKeyword').val();

			// Gửi yêu cầu tìm kiếm đến API
			$.ajax({
				url: '/product/search',
				type: 'GET',
				data: {keyword: keyword},
				success: function (response) {
					var searchResults = $('#searchResults');
					searchResults.empty(); // Xóa nội dung hiện tại

					response.forEach(function (product) {
						var productHTML = `
              <div class="col-lg-4 col-md-6 mb-4">
                <div class="product_thumb destination-item position-relative overflow-hidden mb-2">
                  <a href="/product/detail/${product.productid}">
                    <img style="height:260px" class="img-fluid" src="${product.image}" alt="">
                  </a>
                </div>
                <div class="product_content" style="text-align: center;">
                  <h5 class="product_title">
                    <a>${product.productname}</a>
                  </h5>
                  <span class="product_price">${product.price}đ</span>
                </div>
              </div>`;

						searchResults.append(productHTML);
					});
				},
				error: function (xhr) {
					console.log(xhr.responseText);
				}
			});
		});
		
		
		

		
	</script>
	
	<script>
	$(document).ready(function() {
	    // Gắn kết sự kiện submit cho biểu mẫu lọc sản phẩm
	    $('#filterForm').submit(function(event) {
	        event.preventDefault(); // Ngăn chặn hành vi mặc định của trình duyệt

	        var minPrice = $('#minPrice').val();
	        var maxPrice = $('#maxPrice').val();

	        // Gửi yêu cầu lọc sản phẩm đến API
	        $.ajax({
	            url: '/product/filter',
	            type: 'GET',
	            data: { minPrice: minPrice, maxPrice: maxPrice },
	            success: function(response) {
	                var filterResults = $('#filterResults');
	                filterResults.empty(); // Xóa nội dung hiện tại

	                response.forEach(function(product) {
	                    // Tạo và hiển thị sản phẩm lọc
	                });
	            },
	            error: function(xhr) {
	                console.log(xhr.responseText);
	            }
	        });
	    });
	});
	
	</script>
</body>

</html>